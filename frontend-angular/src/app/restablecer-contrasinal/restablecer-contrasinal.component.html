<div class="restablecer-container">
    <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="restablecer-form">
        <h2>Crear Nova Contrasinal</h2>
        <p>Introduce a túa nova contrasinal para recuperar o acceso.</p>

        <!-- Campo Oculto para el Token -->
        <input type="hidden" formControlName="token">

        <div class="form-group">
            <label for="email">Correo electrónico</label>
            <!-- El email se rellena automáticamente y es de solo lectura -->
            <input type="email" id="email" formControlName="email" readonly class="readonly-input">
        </div>

        <div class="form-group">
            <label for="password">Nova Contrasinal</label>
            <input type="password" id="password" formControlName="password" placeholder="Mínimo 8 caracteres">
            <div class="error" *ngIf="resetForm.get('password')?.invalid && resetForm.get('password')?.touched">
                Mínimo 8 caracteres.
            </div>
        </div>

        <div class="form-group">
            <label for="password_confirmation">Confirmar Contrasinal</label>
            <input type="password" id="password_confirmation" formControlName="password_confirmation" placeholder="Repite a contrasinal">
            <div class="error" *ngIf="resetForm.errors?.['mismatch'] && resetForm.get('password_confirmation')?.touched">
                As contrasinais non coinciden.
            </div>
        </div>

        <button type="submit" class="btn-primary" [disabled]="resetForm.invalid || loading()">
            <i class="fas fa-spinner fa-spin" *ngIf="loading()"></i>
            {{ loading() ? 'Gardando...' : 'Cambiar Contrasinal' }}
        </button>
    </form>
</div>