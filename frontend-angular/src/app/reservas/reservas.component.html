<div class="container-reservas">
    <header>
        <img src="/assets/logo_principal.png" alt="Logo Centro Deportivo" class="logo">
        
        <div class="top-buttons">
            <button routerLink="/mis-reservas">As mi帽as reservas</button> 
            <button routerLink="/perfil">Perfil</button>
            <button (click)="authService.logout()" class="logout">Pechar sesi贸n</button>
        </div>
    </header>

    <div class="main-container">
        <!-- Panel lateral -->
        <aside class="sidebar">
            
            <!-- ZONA ADMIN -->
            <div *ngIf="esAdmin()" class="admin-panel">
                <h3>Administraci贸n</h3>
                <button routerLink="/admin/instalacions" class="btn-admin">
                    锔 Instalaci贸ns
                </button>
                <button routerLink="/admin/reservas" class="btn-admin">
                     Xestionar Reservas
                </button>
                <button routerLink="/admin/estatisticas" class="btn-admin">
                     Estat铆sticas
                </button>
            </div>

            <!-- ZONA FILTROS -->
            <div class="filters">
                <h3>Filtros</h3>
                <label for="tipo">Tipo de instalaci贸n</label>
                <select id="tipo" name="tipo" [(ngModel)]="filtroTipo" (ngModelChange)="filtrar()">
                    <option value="">Todos</option>
                    <option *ngFor="let t of reservaService.tipos()" [value]="t.id_tipo">{{ t.nome_tipo }}</option>
                </select>
            </div>
        </aside>

        <!-- Cuerpo principal -->
        <section class="cards-container">
            
            <div *ngIf="reservaService.loading()" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Cargando instalaci贸ns...
            </div>
            
            <div *ngIf="!reservaService.loading() && instalacionsFiltradas().length === 0" class="empty-state">
                Non se atoparon instalaci贸ns dispo帽ibles.
            </div>

            <div class="card" *ngFor="let inst of instalacionsFiltradas()">
                <div class="card-header">
                    <h3>{{ inst.nome }}</h3>
                    <span class="badge-tipo">{{ inst.tipo?.nome_tipo }}</span>
                </div>
                
                <div class="card-body">
                    <p><strong>Capacidade:</strong> {{ inst.capacidade }} persoas</p>
                    <p><strong>Estado:</strong> 
                        <span class="estado-badge" [style.color]="inst.disponible ? '#28a745' : '#dc3545'">
                            {{ inst.disponible ? ' Disponible' : ' ' + inst.estado_general }}
                        </span>
                    </p>
                </div>
                
                <button 
                    class="btn-reservar"
                    (click)="reservar(inst)"
                    [disabled]="!inst.disponible || reservaService.loading()"
                >
                    {{ inst.disponible ? 'Reservar Agora' : 'Non Dispo帽ible' }}
                </button>
            </div>
        </section>
    </div>
</div>