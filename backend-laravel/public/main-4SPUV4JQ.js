import{a as _e}from"./chunk-P2IZZ4D7.js";import{a as F,b as c,c as I,d as E,f as k,g as ue,h as N,i as A,j as fe,k as ge,l as Ce,m as ve,n as R,p as T}from"./chunk-3FRVCO6D.js";import{$ as re,Aa as Z,C as x,Ca as _,E as u,G as s,I as P,J as r,K as i,L as d,M as Y,N as f,O as M,Q as a,R as D,S as C,Y as h,_ as ie,c as K,d as g,ka as ae,la as O,ma as le,o as m,p as b,pa as y,ra as se,sa as ce,t as Q,ta as pe,u as W,ua as j,va as de,wa as w,xa as B,y as oe,ya as me,z as l,za as S}from"./chunk-6KVODD7N.js";var ee=K(Z());function Oe(o,e){o&1&&(r(0,"div",13),a(1," M\xEDnimo 8 caracteres. "),i())}function ye(o,e){o&1&&(r(0,"div",13),a(1," As contrasinais non coinciden. "),i())}function Se(o,e){o&1&&d(0,"i",14)}var H=class o{fb=m(R);authService=m(_);route=m(j);router=m(w);loading=x(!1);resetForm=this.fb.group({token:["",c.required],email:[{value:"",disabled:!0},[c.required,c.email]],password:["",[c.required,c.minLength(8)]],password_confirmation:["",[c.required]]},{validators:this.passwordMatchValidator});ngOnInit(){this.route.queryParams.subscribe(e=>{this.resetForm.patchValue({token:e.token,email:e.email})})}passwordMatchValidator(e){let n=e.get("password")?.value,t=e.get("password_confirmation")?.value;return n===t?null:{mismatch:!0}}onSubmit(){return g(this,null,function*(){if(this.resetForm.invalid)return;this.loading.set(!0);let e={token:this.resetForm.get("token")?.value,email:this.resetForm.get("email")?.value,password:this.resetForm.get("password")?.value,password_confirmation:this.resetForm.get("password_confirmation")?.value};try{yield this.authService.restablecerContrasinal(e),yield ee.default.fire({icon:"success",title:"Contrasinal Cambiada!",text:"Agora podes iniciar sesi\xF3n coa t\xFAa nova contrasinal.",confirmButtonText:"Ir ao Login"}),this.router.navigate(["/"])}catch{ee.default.fire("Erro","O enlace expirou ou \xE9 inv\xE1lido.","error")}finally{this.loading.set(!1)}})}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=b({type:o,selectors:[["app-restablecer-contrasinal"]],standalone:!0,features:[h],decls:24,vars:6,consts:[[1,"restablecer-container"],[1,"restablecer-form",3,"ngSubmit","formGroup"],["type","hidden","formControlName","token"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","readonly","",1,"readonly-input"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 8 caracteres"],["class","error",4,"ngIf"],["for","password_confirmation"],["type","password","id","password_confirmation","formControlName","password_confirmation","placeholder","Repite a contrasinal"],["type","submit",1,"btn-primary",3,"disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"error"],[1,"fas","fa-spinner","fa-spin"]],template:function(n,t){if(n&1&&(r(0,"div",0)(1,"form",1),f("ngSubmit",function(){return t.onSubmit()}),r(2,"h2"),a(3,"Crear Nova Contrasinal"),i(),r(4,"p"),a(5,"Introduce a t\xFAa nova contrasinal para recuperar o acceso."),i(),d(6,"input",2),r(7,"div",3)(8,"label",4),a(9,"Correo electr\xF3nico"),i(),d(10,"input",5),i(),r(11,"div",3)(12,"label",6),a(13,"Nova Contrasinal"),i(),d(14,"input",7),u(15,Oe,2,0,"div",8),i(),r(16,"div",3)(17,"label",9),a(18,"Confirmar Contrasinal"),i(),d(19,"input",10),u(20,ye,2,0,"div",8),i(),r(21,"button",11),u(22,Se,1,0,"i",12),a(23),i()()()),n&2){let p,v;l(),s("formGroup",t.resetForm),l(14),s("ngIf",((p=t.resetForm.get("password"))==null?null:p.invalid)&&((p=t.resetForm.get("password"))==null?null:p.touched)),l(5),s("ngIf",(t.resetForm.errors==null?null:t.resetForm.errors.mismatch)&&((v=t.resetForm.get("password_confirmation"))==null?null:v.touched)),l(),s("disabled",t.resetForm.invalid||t.loading()),l(),s("ngIf",t.loading()),l(),C(" ",t.loading()?"Gardando...":"Cambiar Contrasinal"," ")}},dependencies:[y,O,T,k,F,I,E,N,A,S],styles:[".restablecer-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f9f9f9}.restablecer-form[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:12px;box-shadow:0 4px 20px #0000001a;max-width:400px;width:100%;display:flex;flex-direction:column;gap:15px}h2[_ngcontent-%COMP%]{color:#4285f4;margin-bottom:5px}p[_ngcontent-%COMP%]{color:#666;margin-bottom:15px;font-size:.95rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}label[_ngcontent-%COMP%]{font-weight:500;color:#333}input[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:8px;font-size:1rem;transition:border-color .3s}input[_ngcontent-%COMP%]:focus{border-color:#4285f4;outline:none}.btn-primary[_ngcontent-%COMP%]{padding:12px;background-color:#4285f4;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a0c3f7;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:5px}.link-back[_ngcontent-%COMP%]{text-align:center;color:#4285f4;text-decoration:none;margin-top:10px}"]})};var V=K(Z());function Ie(o,e){if(o&1&&d(0,"img",14),o&2){let n=M();s("src",n.previewUrl,oe)}}function Ee(o,e){if(o&1&&(r(0,"div",15),a(1),ie(2,"uppercase"),i()),o&2){let n,t=M();l(),C(" ",re(2,1,(n=t.authService.usuario())==null||n.nome==null?null:n.nome.charAt(0))," ")}}function ke(o,e){if(o&1){let n=Y();r(0,"div")(1,"h1"),a(2,"Datos Persoais"),i(),r(3,"form",16),f("ngSubmit",function(){Q(n);let p=M();return W(p.onUpdateProfile())}),r(4,"div")(5,"label",17),a(6,"Nome:"),i(),d(7,"input",18),i(),r(8,"div")(9,"label",19),a(10,"Apelidos:"),i(),d(11,"input",20),i(),r(12,"div")(13,"label",21),a(14,"Correo electr\xF3nico:"),i(),d(15,"input",22),i(),r(16,"div")(17,"label",23),a(18,"Tel\xE9fono:"),i(),d(19,"input",24),i(),r(20,"div",25)(21,"button",26),a(22),i()()()()}if(o&2){let n=M();l(3),s("formGroup",n.perfilForm),l(18),s("disabled",n.perfilForm.invalid||n.loading()),l(),C(" ",n.loading()?"Gardando...":"Gardar cambios"," ")}}function Ne(o,e){o&1&&(r(0,"div",34),a(1," As contrasinais non coinciden. "),i())}function Ae(o,e){if(o&1){let n=Y();r(0,"div")(1,"h1"),a(2,"Cambiar Contrasinal"),i(),r(3,"form",16),f("ngSubmit",function(){Q(n);let p=M();return W(p.onUpdatePassword())}),r(4,"div")(5,"label",27),a(6,"Contrasinal Actual:"),i(),d(7,"input",28),i(),r(8,"div")(9,"label",29),a(10,"Nova Contrasinal:"),i(),d(11,"input",30),i(),r(12,"div")(13,"label",31),a(14,"Repetir Nova Contrasinal:"),i(),d(15,"input",32),i(),u(16,Ne,2,0,"div",33),r(17,"div",25)(18,"button",26),a(19),i()()()()}if(o&2){let n,t=M();l(3),s("formGroup",t.passwordForm),l(13),s("ngIf",(t.passwordForm.errors==null?null:t.passwordForm.errors.mismatch)&&((n=t.passwordForm.get("password_confirmation"))==null?null:n.touched)),l(2),s("disabled",t.passwordForm.invalid||t.loading()),l(),C(" ",t.loading()?"Cambiando...":"Actualizar Contrasinal"," ")}}var $=class o{authService=m(_);fb=m(R);seccionActiva=x("datos");loading=x(!1);selectedFile=null;previewUrl=null;perfilForm=this.fb.group({nome:["",[c.required,c.maxLength(50)]],apelidos:["",[c.required,c.maxLength(100)]],correo:["",[c.required,c.email]],telefono:["",[c.pattern(/^[6-9][0-9]{8}$/)]]});passwordForm=this.fb.group({current_password:["",c.required],password:["",[c.required,c.minLength(8)]],password_confirmation:["",c.required]},{validators:this.passwordMatchValidator});ngOnInit(){let e=this.authService.usuario();e&&(this.perfilForm.patchValue({nome:e.nome,apelidos:e.apelidos,correo:e.correo,telefono:e.telefono}),e.url_foto&&(this.previewUrl=e.url_foto))}passwordMatchValidator(e){let n=e.get("password")?.value,t=e.get("password_confirmation")?.value;return n===t?null:{mismatch:!0}}cambiarSeccion(e){this.seccionActiva.set(e)}triggerFileInput(){document.getElementById("fileInput").click()}onFileSelected(e){let n=e.target.files[0];if(n){this.selectedFile=n;let t=new FileReader;t.onload=()=>{this.previewUrl=t.result},t.readAsDataURL(n)}}onUpdateProfile(){return g(this,null,function*(){if(this.perfilForm.invalid)return;this.loading.set(!0);let e=new FormData;e.append("nome",this.perfilForm.get("nome")?.value||""),e.append("apelidos",this.perfilForm.get("apelidos")?.value||""),e.append("correo",this.perfilForm.get("correo")?.value||""),e.append("telefono",this.perfilForm.get("telefono")?.value||""),this.selectedFile&&e.append("foto",this.selectedFile);try{yield this.authService.updateProfile(e),V.default.fire("Gardado","Perfil actualizado correctamente.","success")}catch(n){let t=n.error?.message||"Erro ao actualizar perfil.";V.default.fire("Erro",t,"error")}finally{this.loading.set(!1)}})}onUpdatePassword(){return g(this,null,function*(){if(!this.passwordForm.invalid){this.loading.set(!0);try{yield this.authService.updatePassword(this.passwordForm.value),V.default.fire("\xC9xito","O teu contrasinal cambiouse correctamente.","success"),this.passwordForm.reset()}catch(e){let n=e.error?.errors,t="Erro ao cambiar contrasinal.";n?.current_password&&(t=n.current_password[0]),V.default.fire("Erro",t,"error")}finally{this.loading.set(!1)}}})}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=b({type:o,selectors:[["app-perfil"]],standalone:!0,features:[h],decls:22,vars:9,consts:[[1,"container"],[1,"sidebar"],[1,"avatar-container",3,"click"],["type","file","id","fileInput","accept","image/*",2,"display","none",3,"change"],["class","avatar-img","alt","Foto de perfil",3,"src",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"edit-icon"],[1,"user-name"],[1,"menu-lateral"],[3,"click"],[1,"logout-item",3,"click"],["routerLink","/reservas",1,"back-btn"],[1,"main-content"],[4,"ngIf"],["alt","Foto de perfil",1,"avatar-img",3,"src"],[1,"avatar-placeholder"],[3,"ngSubmit","formGroup"],["for","nome"],["type","text","id","nome","formControlName","nome"],["for","apelidos"],["type","text","id","apelidos","formControlName","apelidos"],["for","correo"],["type","email","id","correo","formControlName","correo"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono"],[1,"form-buttons"],["type","submit",1,"save-btn",3,"disabled"],["for","current_password"],["type","password","id","current_password","formControlName","current_password","placeholder","Introduce o teu contrasinal actual"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDn. 8 caracteres, mai\xFAscula, s\xEDmbolo..."],["for","password_confirmation"],["type","password","id","password_confirmation","formControlName","password_confirmation"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(n,t){if(n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),f("click",function(){return t.triggerFileInput()}),r(3,"input",3),f("change",function(v){return t.onFileSelected(v)}),i(),u(4,Ie,1,1,"img",4)(5,Ee,3,3,"div",5),r(6,"span",6),a(7,"\u{1F4F7}"),i()(),r(8,"h3",7),a(9),i(),r(10,"ul",8)(11,"li",9),f("click",function(){return t.cambiarSeccion("datos")}),a(12," Datos persoais "),i(),r(13,"li",9),f("click",function(){return t.cambiarSeccion("password")}),a(14," Cambiar contrasinal "),i(),r(15,"li",10),f("click",function(){return t.authService.logout()}),a(16," Pechar sesi\xF3n "),i()(),r(17,"button",11),a(18,"\u2190 Volver ao Panel"),i()(),r(19,"div",12),u(20,ke,23,3,"div",13)(21,Ae,20,4,"div",13),i()()),n&2){let p;l(4),s("ngIf",t.previewUrl),l(),s("ngIf",!t.previewUrl),l(4),D((p=t.authService.usuario())==null?null:p.nome),l(2),P("active",t.seccionActiva()==="datos"),l(2),P("active",t.seccionActiva()==="password"),l(7),s("ngIf",t.seccionActiva()==="datos"),l(),s("ngIf",t.seccionActiva()==="password")}},dependencies:[y,O,le,T,k,F,I,E,N,A,S,B],styles:[".avatar-img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid #4285F4}*[_ngcontent-%COMP%]{box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1000px;margin:40px auto;display:flex;gap:30px;padding:0 20px}.sidebar[_ngcontent-%COMP%]{width:280px;background-color:#fff;padding:30px 20px;border-radius:12px;box-shadow:0 4px 15px #0000000d;display:flex;flex-direction:column;align-items:center;height:fit-content}.avatar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;margin-bottom:15px}.avatar-placeholder[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background-color:#4285f4;color:#fff;display:flex;align-items:center;justify-content:center;font-size:2.5rem;font-weight:700}.edit-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:#fff;border-radius:50%;padding:5px;font-size:1rem;box-shadow:0 2px 5px #0003}.user-name[_ngcontent-%COMP%]{margin-bottom:25px;color:#333;font-size:1.2rem}.menu-lateral[_ngcontent-%COMP%]{list-style:none;padding:0;width:100%}.menu-lateral[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0;cursor:pointer;padding:12px 15px;border-radius:8px;transition:all .2s;color:#555;font-weight:500}.menu-lateral[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f4ff;color:#4285f4}.menu-lateral[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff}.menu-lateral[_ngcontent-%COMP%]   li.logout-item[_ngcontent-%COMP%]{margin-top:20px;color:#dc3545;border:1px solid transparent}.menu-lateral[_ngcontent-%COMP%]   li.logout-item[_ngcontent-%COMP%]:hover{background-color:#fff5f5;border-color:#dc3545;color:#dc3545}.back-btn[_ngcontent-%COMP%]{margin-top:20px;background:none;border:none;color:#666;cursor:pointer;text-decoration:underline}.main-content[_ngcontent-%COMP%]{flex:1;background-color:#fff;padding:40px;border-radius:12px;box-shadow:0 4px 15px #0000000d}.main-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px;color:#333;border-bottom:2px solid #f0f0f0;padding-bottom:10px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px;display:block;color:#555}input[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border-radius:8px;border:1px solid #ddd;font-size:1rem;transition:border-color .3s}input[_ngcontent-%COMP%]:focus{border-color:#4285f4;outline:none}.form-buttons[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:15px}button.save-btn[_ngcontent-%COMP%]{padding:12px 25px;border:none;border-radius:8px;font-size:1rem;cursor:pointer;color:#fff;background-color:#28a745;font-weight:700;transition:background .3s}button.save-btn[_ngcontent-%COMP%]:hover{background-color:#218838}button.save-btn[_ngcontent-%COMP%]:disabled{background-color:#94d3a2;cursor:not-allowed}.error-msg[_ngcontent-%COMP%]{color:#dc3545;font-size:.9rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column;margin:20px auto}.sidebar[_ngcontent-%COMP%]{width:100%;padding:20px}.main-content[_ngcontent-%COMP%]{padding:20px}}"]})};var xe=K(Z());function Re(o,e){o&1&&(r(0,"div",26),a(1," O nome \xE9 obrigatorio (m\xE1x. 100 caracteres). "),i())}function Te(o,e){if(o&1&&(r(0,"option",27),a(1),i()),o&2){let n=e.$implicit;s("value",n.id_tipo),l(),C(" ",n.nome_tipo," ")}}function De(o,e){o&1&&(r(0,"div",26),a(1," Debes seleccionar un tipo. "),i())}function Ve(o,e){o&1&&(r(0,"div",26),a(1," A capacidade debe ser polo menos 1. "),i())}function ze(o,e){if(o&1&&(r(0,"option",27),a(1),i()),o&2){let n=e.$implicit;s("value",n),l(),D(n)}}var z=class o{fb=m(R);adminService=m(_e);authService=m(_);router=m(w);route=m(j);isEditing=x(!1);instalacionId=null;instalacionForm=this.fb.group({nome:["",[c.required,c.maxLength(100)]],id_tipo:["",[c.required]],capacidade:[0,[c.required,c.min(1)]],estado:["Disponible",[c.required]]});estadosDisponibles=["Disponible","En Mantemento","Ocupada"];ngOnInit(){if(this.authService.usuario()?.rol?.nome_rol!=="Administrador"){this.router.navigate(["/reservas"]);return}this.adminService.tipos().length===0&&this.adminService.cargarDatos();let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditing.set(!0),this.instalacionId=+e,this.cargarInstalacion(this.instalacionId))}cargarInstalacion(e){return g(this,null,function*(){try{let n=yield this.adminService.getInstalacion(e);this.instalacionForm.patchValue({nome:n.nome,id_tipo:n.id_tipo.toString(),capacidade:n.capacidade,estado:n.estado})}catch{this.router.navigate(["/admin/instalacions"])}})}onCrearTipo(){return g(this,null,function*(){let{value:e}=yield xe.default.fire({title:"Novo tipo de instalaci\xF3n",input:"text",inputLabel:"Nome",inputPlaceholder:"Ex: Pista de tenis",showCancelButton:!0,confirmButtonText:"Crear",cancelButtonText:"Cancelar",confirmButtonColor:"#4285F4",inputValidator:n=>n?null:"Debes escribir un nome!"});if(e){let n=yield this.adminService.crearTipoInstalacion(e)}})}onSubmit(){return g(this,null,function*(){if(this.instalacionForm.invalid){this.instalacionForm.markAllAsTouched();return}let e=!1;this.isEditing()&&this.instalacionId?e=yield this.adminService.editarInstalacion(this.instalacionId,this.instalacionForm.value):e=yield this.adminService.crearInstalacion(this.instalacionForm.value),e&&this.router.navigate(["/admin/instalacions"])})}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=b({type:o,selectors:[["app-instalacion"]],standalone:!0,features:[h],decls:49,vars:16,consts:[[1,"page-container"],[1,"logo-area"],["src","/assets/logo_principal.png","alt","Logo",2,"height","40px"],[1,"user-nav"],[1,"content-wrapper"],[1,"main-area"],[1,"form-header"],[1,"subtitle"],[1,"admin-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nome"],["type","text","id","nome","formControlName","nome","placeholder","Ex: Pista de P\xE1del 3"],["class","error-msg",4,"ngIf"],["for","id_tipo"],[1,"select-wrapper",2,"display","flex","gap","10px"],["id","id_tipo","formControlName","id_tipo",2,"flex","1"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","button","title","Crear novo tipo",1,"btn-add-type",3,"click"],["for","capacidade"],["type","number","id","capacidade","formControlName","capacidade","min","1"],["for","estado"],["id","estado","formControlName","estado"],[1,"form-actions"],["type","button","routerLink","/admin/instalacions",1,"btn-cancel"],["type","submit",1,"btn-save",3,"disabled"],[1,"error-msg"],[3,"value"]],template:function(n,t){if(n&1&&(r(0,"div",0)(1,"header")(2,"div",1),d(3,"img",2),i(),r(4,"nav",3)(5,"span"),a(6,"Modo Admin"),i()()(),r(7,"div",4)(8,"main",5)(9,"div",6)(10,"h1"),a(11),i(),r(12,"p",7),a(13),i()(),r(14,"form",8),f("ngSubmit",function(){return t.onSubmit()}),r(15,"div",9)(16,"label",10),a(17,"Nome da Instalaci\xF3n"),i(),d(18,"input",11),u(19,Re,2,0,"div",12),i(),r(20,"div",9)(21,"label",13),a(22,"Tipo"),i(),r(23,"div",14)(24,"select",15)(25,"option",16),a(26,"Selecciona un tipo"),i(),u(27,Te,2,2,"option",17),i(),r(28,"button",18),f("click",function(){return t.onCrearTipo()}),a(29," + "),i()(),u(30,De,2,0,"div",12),i(),r(31,"div",9)(32,"label",19),a(33,"Capacidade (persoas)"),i(),d(34,"input",20),u(35,Ve,2,0,"div",12),i(),r(36,"div",9)(37,"label",21),a(38,"Estado Inicial"),i(),r(39,"select",22),u(40,ze,2,2,"option",17),i()(),r(41,"div",23)(42,"button",24),a(43," Cancelar "),i(),r(44,"button",25),a(45),i()()()()(),r(46,"footer")(47,"p"),a(48,"\xA9 2025 Xesti\xF3n de Reservas - Panel de Administraci\xF3n"),i()()()),n&2){let p,v,G,L,q,U;l(11),D(t.isEditing()?"Editar Instalaci\xF3n":"Engadir Nova Instalaci\xF3n"),l(2),C(" ",t.isEditing()?"Modifica os datos da instalaci\xF3n existente.":"Completa os datos para rexistrar unha nova instalaci\xF3n no sistema."," "),l(),s("formGroup",t.instalacionForm),l(4),P("invalid",((p=t.instalacionForm.get("nome"))==null?null:p.invalid)&&((p=t.instalacionForm.get("nome"))==null?null:p.touched)),l(),s("ngIf",((v=t.instalacionForm.get("nome"))==null?null:v.invalid)&&((v=t.instalacionForm.get("nome"))==null?null:v.touched)),l(5),P("invalid",((G=t.instalacionForm.get("id_tipo"))==null?null:G.invalid)&&((G=t.instalacionForm.get("id_tipo"))==null?null:G.touched)),l(3),s("ngForOf",t.adminService.tipos()),l(3),s("ngIf",((L=t.instalacionForm.get("id_tipo"))==null?null:L.invalid)&&((L=t.instalacionForm.get("id_tipo"))==null?null:L.touched)),l(4),P("invalid",((q=t.instalacionForm.get("capacidade"))==null?null:q.invalid)&&((q=t.instalacionForm.get("capacidade"))==null?null:q.touched)),l(),s("ngIf",((U=t.instalacionForm.get("capacidade"))==null?null:U.invalid)&&((U=t.instalacionForm.get("capacidade"))==null?null:U.touched)),l(5),s("ngForOf",t.estadosDisponibles),l(4),s("disabled",t.instalacionForm.invalid||t.adminService.loading()),l(),C(" ",t.adminService.loading()?"Gardando...":t.isEditing()?"Actualizar Instalaci\xF3n":"Gardar Instalaci\xF3n"," ")}},dependencies:[y,ae,O,T,k,ge,Ce,F,ue,fe,I,E,ve,N,A,S,B],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;font-family:Roboto,sans-serif;color:#333;background-color:#f5f5f5}.page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}header[_ngcontent-%COMP%]{background-color:#dae8fc;padding:16px 32px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 4px #0000000d}header[_ngcontent-%COMP%]   .logo-area[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333;margin:0}header[_ngcontent-%COMP%]   .user-nav[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.content-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;padding:32px}.main-area[_ngcontent-%COMP%]{background-color:#fff;width:100%;max-width:800px;padding:40px;border-radius:12px;box-shadow:0 4px 20px #0000000d}.form-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333;margin-bottom:10px}.form-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:16px;color:#666;font-weight:400}.admin-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:16px;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px;border:1px solid #CCCCCC;border-radius:6px;font-family:Roboto,sans-serif;font-size:16px;background-color:#fff;transition:border-color .3s ease,box-shadow .3s ease;width:100%}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#7cadf4;box-shadow:0 0 0 3px #dae8fc80}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.invalid[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;margin-top:4px}.select-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:stretch}.select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1}.btn-add-type[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0 15px;background-color:#e2efda;border:1px solid #c6e0b6;border-radius:6px;cursor:pointer;color:#333;font-size:1.2rem;transition:background .3s}.btn-add-type[_ngcontent-%COMP%]:hover{background-color:#d4e7c8}.form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:30px;justify-content:flex-end}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;height:48px;border:none;border-radius:8px;font-family:Roboto,sans-serif;font-weight:500;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #0000001a;filter:saturate(1.1)}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background-color:#e2efda;color:#333;border:1px solid #c6e0b6}.form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #CCCCCC;text-decoration:none}.form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}footer[_ngcontent-%COMP%]{text-align:center;padding:20px;color:gray;font-size:14px;border-top:1px solid #CCCCCC;margin-top:auto}@media (max-width: 768px){header[_ngcontent-%COMP%]{padding:16px;flex-direction:column;gap:10px;text-align:center}.content-wrapper[_ngcontent-%COMP%]{padding:16px}.main-area[_ngcontent-%COMP%]{padding:20px}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};var X=()=>g(void 0,null,function*(){let o=m(_),e=m(w),n=localStorage.getItem("token");if(o.estaLogueado())return!0;if(n)try{yield o.comprobarSesion()}catch{}return o.estaLogueado()?!0:(e.navigate(["/"]),!1)}),Ge=()=>g(void 0,null,function*(){let o=m(w),e=m(_);return!e.estaLogueado()&&localStorage.getItem("token")&&(yield e.comprobarSesion()),e.usuario()&&e.usuario().rol.nome_rol==="Administrador"?!0:(o.navigate(["/reservas"]),!1)}),Pe=[{path:"",loadComponent:()=>import("./chunk-SWRBTS7U.js").then(o=>o.LoginComponent)},{path:"registro",loadComponent:()=>import("./chunk-6ECXJ2MP.js").then(o=>o.RegistroComponent)},{path:"reservas",loadComponent:()=>import("./chunk-2PJHUEKP.js").then(o=>o.ReservasComponent),canActivate:[X]},{path:"mis-reservas",loadComponent:()=>import("./chunk-CJ42Y5EO.js").then(o=>o.MisReservasComponent),canActivate:[X]},{path:"olvido-contrasinal",loadComponent:()=>import("./chunk-G6YQFRAP.js").then(o=>o.SolicitarRestablecimientoComponent)},{path:"restablecer-contrasinal",component:H},{path:"perfil",component:$,canActivate:[X]},{path:"admin",canActivate:[X,Ge],children:[{path:"instalacions",loadComponent:()=>import("./chunk-BWM4YK2H.js").then(o=>o.AdminComponent)},{path:"instalacions/engadir",component:z},{path:"instalacions/editar/:id",component:z},{path:"reservas",loadComponent:()=>import("./chunk-AB4KBL3H.js").then(o=>o.AdminReservasComponent)},{path:"estatisticas",loadComponent:()=>import("./chunk-SVMUMWZX.js").then(o=>o.EstatisticasComponent)},{path:"",redirectTo:"instalacions",pathMatch:"full"}]},{path:"**",redirectTo:""}];var Me=(o,e)=>{let n=localStorage.getItem("token");if(n){let t=o.clone({setHeaders:{Authorization:`Bearer ${n}`}});return e(t)}return e(o)};var we={providers:[me(Pe),se(ce([Me]))]};var J=class o{title="frontend-angular";static \u0275fac=function(n){return new(n||o)};static \u0275cmp=b({type:o,selectors:[["app-root"]],standalone:!0,features:[h],decls:1,vars:0,template:function(n,t){n&1&&d(0,"router-outlet")},dependencies:[de]})};pe(J,we).catch(o=>console.error(o));
