import{a as j}from"./chunk-P2IZZ4D7.js";import{c as V,e as D,j as L,k as W,l as z,o as R}from"./chunk-3FRVCO6D.js";import{C,Ca as N,E as p,G as s,J as n,K as e,M,N as _,O as m,Q as i,R as x,S as b,U as h,V as v,W as E,Y as P,fa as w,ka as k,la as y,o as g,p as S,pa as I,t as u,u as f,wa as F,xa as T,z as l,za as A}from"./chunk-6KVODD7N.js";function U(o,r){if(o&1&&(n(0,"option",11),i(1),e()),o&2){let t=r.$implicit;s("value",t.id_tipo),l(),b(" ",t.nome_tipo," ")}}function $(o,r){if(o&1&&(n(0,"option",11),i(1),e()),o&2){let t=r.$implicit;s("value",t),l(),b(" ",t," ")}}function q(o,r){if(o&1){let t=M();n(0,"select",3),E("ngModelChange",function(c){u(t);let d=m();return v(d.filtroEstado,c)||(d.filtroEstado=c),f(c)}),n(1,"option",4),i(2,"Filtrar por estado (Todos)"),e(),p(3,$,2,2,"option",5),e()}if(o&2){let t=m();h("ngModel",t.filtroEstado),l(3),s("ngForOf",t.estadosDisponibles)}}function G(o,r){o&1&&(n(0,"tr")(1,"td",12),i(2," Cargando datos... "),e()())}function H(o,r){o&1&&(n(0,"tr")(1,"td",12),i(2," Non se atoparon instalaci\xF3ns. "),e()())}function J(o,r){if(o&1){let t=M();n(0,"tr")(1,"td"),i(2),e(),n(3,"td"),i(4),e(),n(5,"td"),i(6),e(),n(7,"td"),i(8),e(),n(9,"td",13)(10,"button",14),_("click",function(){let c=u(t).$implicit,d=m();return f(d.onEditar(c.id_instalacion))}),i(11,"Editar"),e(),n(12,"button",15),_("click",function(){let c=u(t).$implicit,d=m();return f(d.onEliminar(c.id_instalacion))}),i(13,"Eliminar"),e()()()}if(o&2){let t=r.$implicit;l(2),x(t.nome),l(2),x(t.tipo==null?null:t.tipo.nome_tipo),l(2),b("",t.capacidade," persoas"),l(2),x(t.estado)}}var B=class o{adminService=g(j);authService=g(N);router=g(F);filtroTipoId=C("");filtroEstado=C("");estadosDisponibles=["Disponible","En Mantemento","Ocupada"];instalacionsFiltradas=w(()=>{let r=this.adminService.instalacions(),t=this.filtroTipoId(),a=this.filtroEstado();return r.filter(c=>{let d=!0,O=!0;return t&&(d=c.id_tipo===+t),a&&(O=c.estado.toLowerCase()===a.toLowerCase()),d&&O})});ngOnInit(){this.authService.usuario()?.rol?.nome_rol==="Administrador"?this.adminService.cargarDatos():this.router.navigate(["reservas"])}onEliminar(r){this.adminService.eliminarInstalacion(r)}onEditar(r){this.router.navigate(["/admin/instalacions/editar",r])}onEngadir(){this.router.navigate(["/admin/instalacions/engadir"])}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=S({type:o,selectors:[["app-admin"]],standalone:!0,features:[P],decls:31,vars:6,consts:[[1,"container"],[1,"top-bar"],[3,"click"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"margin-top","20px","text-align","center"],["routerLink","/reservas",1,"btn-volver",2,"padding","10px 20px","background-color","#6c757d","color","white","border","none","border-radius","8px","cursor","pointer"],[3,"value"],["colspan","5",2,"text-align","center","padding","20px","color","#666"],[1,"actions"],[1,"edit-btn",3,"click"],[1,"delete-btn",3,"click"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h1"),i(2,"Panel de Instalaci\xF3ns"),e(),n(3,"div",1)(4,"button",2),_("click",function(){return a.onEngadir()}),i(5,"Engadir instalaci\xF3n"),e(),n(6,"select",3),E("ngModelChange",function(d){return v(a.filtroTipoId,d)||(a.filtroTipoId=d),d}),n(7,"option",4),i(8,"Filtrar por tipo (Todos)"),e(),p(9,U,2,2,"option",5),e(),p(10,q,4,2,"select",6),e(),n(11,"table")(12,"thead")(13,"tr")(14,"th"),i(15,"Nome"),e(),n(16,"th"),i(17,"Tipo"),e(),n(18,"th"),i(19,"Capacidade"),e(),n(20,"th"),i(21,"Estado"),e(),n(22,"th"),i(23,"Acci\xF3ns"),e()()(),n(24,"tbody"),p(25,G,3,0,"tr",7)(26,H,3,0,"tr",7)(27,J,14,4,"tr",8),e()(),n(28,"div",9)(29,"button",10),i(30," \u2190 Volver ao Cat\xE1logo "),e()()()),t&2&&(l(6),h("ngModel",a.filtroTipoId),l(3),s("ngForOf",a.adminService.tipos()),l(),s("ngIf",a.estadosDisponibles),l(15),s("ngIf",a.adminService.loading()),l(),s("ngIf",!a.adminService.loading()&&a.instalacionsFiltradas().length===0),l(),s("ngForOf",a.instalacionsFiltradas()))},dependencies:[I,k,y,R,W,z,L,V,D,A,T],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}body[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:10px}.top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .top-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 15px;border-radius:8px;border:1px solid #ccc;font-size:1rem;cursor:pointer}.top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:none;transition:background .3s}.top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#357ae8}.top-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 0 15px #0000001a}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left}th[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;margin-right:5px;border:none;border-radius:6px;cursor:pointer;font-size:.9rem;color:#fff;transition:background .3s}.edit-btn[_ngcontent-%COMP%]{background-color:orange}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#e69500}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}@media (max-width: 768px){th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}.top-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}']})};export{B as AdminComponent};
