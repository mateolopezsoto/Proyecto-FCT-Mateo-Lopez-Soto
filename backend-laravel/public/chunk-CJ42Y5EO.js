import{a as D}from"./chunk-J3PVLA2Q.js";import{$ as S,Aa as j,C as x,Ca as A,E as p,G as s,J as a,K as t,M as h,N as M,O as g,Q as o,R as u,S as O,T as P,Y as y,Z as w,_ as m,ba as _,c as U,d as f,ja as R,ka as E,la as I,na as k,o as d,oa as F,p as v,pa as T,t as b,u as C,wa as B,xa as N,z as i}from"./chunk-6KVODD7N.js";var l=U(j());var H=(n,r)=>({"estado-confirmada":n,"estado-cancelada":r});function $(n,r){n&1&&(a(0,"div",5),o(1,"Cargando historial..."),t())}function Q(n,r){n&1&&(a(0,"div",6),o(1," A\xEDnda non tes ningunha reserva. "),t())}function Y(n,r){if(n&1){let e=h();a(0,"button",11),M("click",function(){b(e);let V=g().$implicit,L=g(2);return C(L.onCancelar(V.id_reserva))}),o(1," Cancelar "),t()}}function q(n,r){n&1&&(a(0,"span",12),o(1," N/A "),t())}function G(n,r){if(n&1&&(a(0,"tr")(1,"td"),o(2),m(3,"date"),t(),a(4,"td"),o(5),t(),a(6,"td"),o(7),m(8,"slice"),m(9,"slice"),t(),a(10,"td")(11,"span",8),o(12),t()(),a(13,"td"),p(14,Y,2,0,"button",9)(15,q,2,0,"span",10),t()()),n&2){let e=r.$implicit;i(2),u(S(3,8,e.data_reserva)),i(3),u(e.instalacion==null?null:e.instalacion.nome),i(2),P("",_(8,10,e.horario==null?null:e.horario.hora_inicio,0,5)," - ",_(9,14,e.horario==null?null:e.horario.hora_fin,0,5),""),i(4),s("ngClass",w(18,H,e.estado==="Confirmada",e.estado==="Cancelada")),i(),O(" ",e.estado," "),i(2),s("ngIf",e.estado==="Confirmada"),i(),s("ngIf",e.estado==="Cancelada")}}function J(n,r){if(n&1&&(a(0,"table")(1,"thead")(2,"tr")(3,"th"),o(4,"Data"),t(),a(5,"th"),o(6,"Instalaci\xF3n"),t(),a(7,"th"),o(8,"Horario"),t(),a(9,"th"),o(10,"Estado"),t(),a(11,"th"),o(12,"Acci\xF3n"),t()()(),a(13,"tbody"),p(14,G,16,21,"tr",7),t()()),n&2){let e=g();i(14),s("ngForOf",e.misReservas())}}var z=class n{reservaService=d(D);authService=d(A);router=d(B);misReservas=x([]);loading=x(!1);ngOnInit(){this.authService.estaLogueado()&&this.cargarMisReservas()}cargarMisReservas(){return f(this,null,function*(){this.loading.set(!0);try{let r=yield this.reservaService.cargarHistorico();this.misReservas.set(r)}catch(r){console.error("Error cargando hist\xF3rico:",r),l.default.fire("Erro","Non se puido cargar o seu hist\xF3rico de reservas.","error")}finally{this.loading.set(!1)}})}onCancelar(r){return f(this,null,function*(){if((yield l.default.fire({title:"Queres cancelar esta reserva?",text:"Esta acci\xF3n non se pode desfacer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#DC3545",cancelButtonColor:"#FFA500",confirmButtonText:"Si, cancelar!",cancelButtonText:"Manter reserva"})).isConfirmed){this.loading.set(!0);try{yield this.reservaService.cancelarReserva(r),l.default.fire("Cancelada!","A reserva foi cancelada con \xE9xito.","success"),this.cargarMisReservas()}catch{l.default.fire("Erro","Non se puido procesar a cancelaci\xF3n.","error")}finally{this.loading.set(!1)}}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-mis-reservas"]],standalone:!0,features:[y],decls:9,vars:3,consts:[[1,"container-mis-reservas"],["routerLink","/reservas",1,"btn-primary"],["class","loading-indicator",4,"ngIf"],["class","no-reservas",4,"ngIf"],[4,"ngIf"],[1,"loading-indicator"],[1,"no-reservas"],[4,"ngFor","ngForOf"],[3,"ngClass"],["class","btn-cancelar",3,"click",4,"ngIf"],["class","text-gray-500",4,"ngIf"],[1,"btn-cancelar",3,"click"],[1,"text-gray-500"]],template:function(e,c){e&1&&(a(0,"div",0)(1,"header")(2,"h1"),o(3,"As mi\xF1as Reservas"),t(),a(4,"button",1),o(5,"\u2190 Volver ao Cat\xE1logo"),t()(),p(6,$,2,0,"div",2)(7,Q,2,0,"div",3)(8,J,15,1,"table",4),t()),e&2&&(i(6),s("ngIf",c.loading()),i(),s("ngIf",!c.loading()&&c.misReservas().length===0),i(),s("ngIf",c.misReservas().length>0&&!c.loading()))},dependencies:[T,R,E,I,F,k,N],styles:['@charset "UTF-8";.container-mis-reservas[_ngcontent-%COMP%]{max-width:1200px;margin:40px auto;padding:20px;background-color:#fff;border-radius:12px;box-shadow:0 4px 20px #0000001a;font-family:Inter,sans-serif}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;border-bottom:2px solid #f0f0f0;padding-bottom:20px}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem;color:#007bff;font-weight:700}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 10px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:15px 12px;background-color:#f8f9fa;color:#495057;font-weight:600;text-transform:uppercase;font-size:.9rem}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 5px #0000000d;transition:transform .2s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 10px #0000001a}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;color:#343a40;font-size:1rem;vertical-align:middle}.btn-primary[_ngcontent-%COMP%], .btn-cancelar[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,box-shadow .3s;font-weight:600}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 2px 8px #007bff66}.btn-cancelar[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#c82333;box-shadow:0 2px 8px #dc354566}.estado-confirmada[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;padding:4px 8px;border-radius:4px;font-weight:500}.estado-cancelada[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:4px 8px;border-radius:4px;font-weight:500}.no-reservas[_ngcontent-%COMP%]{text-align:center;padding:50px;font-size:1.2rem;color:#6c757d;background-color:#f8f9fa;border-radius:8px;margin-top:20px}.loading-indicator[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#007bff;font-size:1.1rem}@media (max-width: 768px){.container-mis-reservas[_ngcontent-%COMP%]{margin:10px;padding:10px}header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]{display:none}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:20px;padding:10px}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;padding-left:50%;position:relative}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:12px;width:50%;padding-right:10px;white-space:nowrap;text-align:left;font-weight:600;color:#495057}}']})};export{z as MisReservasComponent};
